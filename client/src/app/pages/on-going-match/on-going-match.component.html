<div class="game-shell">
    <header class="top-bar">
        <div *ngIf="matchSrv.match.observers.length > 0" class="observer-indicator">
            <mat-icon>visibility</mat-icon>
            <span>{{ matchSrv.match.observers.length }}</span>
        </div>
        <button mat-raised-button class="background-red" (click)="handleQuitMatchActions()">{{ 'BUTTONS.ABANDON' | translate }}</button>
    </header>

    <section class="game-layout">
        <div class="question-panel">
            <app-question-answer (keydown.enter)="this.onEnterKey()"></app-question-answer>
        </div>

        <aside class="status-panel">
            <mat-card class="status-card">
                <p class="status-label">{{ 'TITLES.SCORE' | translate }}</p>
                <p class="status-value" *ngIf="!matchSrv.match.isTeamMatch">{{ this.getScore() }} points</p>
                <p class="status-value" *ngIf="matchSrv.match.isTeamMatch">
                    {{ matchSrv.calculateTeamScore(matchSrv.getTeamByPlayerName(accountService.account.pseudonym)) }} points
                </p>
            </mat-card>

            <mat-card class="status-card timer-card" [class.panic]="this.isPanicMode">
                <div class="timer-value">{{ this.matchSrv.timeService.timer }}</div>
                <mat-progress-spinner mode="determinate" [value]="(this.matchSrv.timeService.timer * 100) / this.maxTime" class="spinner">
                </mat-progress-spinner>
                <audio *ngIf="this.isPanicMode" controls autoplay (ended)="restartAudio()" #audioZone>
                    <source src="assets/panic_music.mp3" type="audio/mp3" />
                </audio>
            </mat-card>
        </aside>
    </section>
</div>

<mat-card id="observer-controls" *ngIf="matchSrv.isObserver()">
    <h2>{{ 'TITLES.PLAYERS_TO_OBSERVE' | translate }}</h2>
    <mat-form-field appearance="outline">
        <mat-label>{{ 'TITLES.PLAYERS' | translate }}</mat-label>
        <mat-select [(value)]="selectedPlayer" (selectionChange)="onPlayerSelect($event.value)">
            <mat-option *ngFor="let player of matchSrv.match.players" [value]="player.name">
                {{ player.name }}
            </mat-option>
            <mat-option [value]="matchSrv.match.managerName">{{ 'Manager' | translate }}</mat-option>
        </mat-select>
    </mat-form-field>
</mat-card>
