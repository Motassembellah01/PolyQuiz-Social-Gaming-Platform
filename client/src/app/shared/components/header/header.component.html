<div class="header"
    [ngClass]="{
        'header-light': accountService.theme === 'light',
        'header-dark': accountService.theme === 'dark',
        'header-christmas': accountService.theme === 'christmas',
        'header-valentines': accountService.theme === 'valentines',
    }">
    <div class="header-left" *ngIf="!accountService.isInGame && !accountService.isInHomePage && accountService.account.avatarUrl">
        <button
            *ngIf="canGoBack"
            mat-icon-button
            class="nav-icon-btn back-btn"
            (click)="goBack()"
            [matTooltip]="'NAV_BUTTONS.BACK' | translate"
        >
            <i class="material-icons nav-icon">arrow_back</i>
        </button>
        <button
            mat-button
            class="nav-icon-btn home-btn"
            routerLink="/home"
            (click)="navToHome()"
            [matTooltip]="'NAV_BUTTONS.HOME' | translate"
        >
            <i class="material-icons nav-icon">home</i>
            <span class="nav-label">{{ 'NAV_BUTTONS.HOME' | translate }}</span>
        </button>
    </div>
    <div class="header-right">
        <div *ngIf="!accountService.isInGame" class="shop-group">
            <div class="cookie-display">
                <span class="money-amount bold">{{ accountService.money }}</span>
                <img src="assets/cookie_icon.png" alt="Cookie Icon" class="cookie-icon" />
            </div>
            <button mat-button class="header-btn shop-btn" (click)="toggleShop()" [class.toggled]="generalChatService.isShopOpen">
                <i class="material-icons header-icon">shopping_cart</i>
            </button>
        </div>
        <button
            *ngIf="!accountService.isInGame"
            mat-button
            class="header-btn friends-btn"
            (click)="toggleFriends()"
            [class.toggled]="generalChatService.isFriendsOpen"
        >
            <i class="material-icons header-icon">people</i>
            <span *ngIf="accountListenerService.friendRequestsReceived.length > 0" class="tab-badge">
                {{ accountListenerService.friendRequestsReceived.length }}
            </span>
        </button>
        <button
            mat-button
            *ngIf="getTotalUnreadMessages() === 0"
            (click)="toggleChat()"
            class="header-btn chat-btn"
            [class.toggled]="generalChatService.isChatOpen"
            [matTooltip]="this.generalChatService.isChatClosed ? 'Clavardage en mode fenêtré' : ''"
        >
            <i class="material-icons header-icon">forum</i>
        </button>
        <button
            mat-button
            *ngIf="getTotalUnreadMessages() > 0"
            (click)="toggleChat()"
            class="header-btn chat-btn-unread"
            [class.toggled]="generalChatService.isChatOpen"
        >
            <i class="material-icons header-icon">mark_chat_unread</i>
        </button>
        <div *ngIf="!accountService.isInGame" class="profile">
            <button mat-button class="profile-btn" (click)="toggleProfile()" [class.toggled]="generalChatService.isProfileOpen">
                <img [src]="accountService.getLocalAvatar()" alt="avatar" />
                <p
                    class="pseudo"
                    [ngClass]="{
                        'color-white': this.accountService.theme === 'christmas' || this.accountService.theme === 'dark',
                    }"
                >
                    {{ accountService.account.pseudonym }}
                </p>
            </button>
        </div>
    </div>
</div>
<section
    [hidden]="!this.generalChatService.isChatOpen"
    [@headerAnimation]="generalChatService.isChatOpen && !generalChatService.isChatClosed ? 'open' : 'closed'"
    class="chat-box"
    [ngClass]="{
        'light-mode': this.accountService.theme === 'light',
        'dark-mode': this.accountService.theme === 'dark',
        christmas: this.accountService.theme === 'christmas',
        valentines: this.accountService.theme === 'valentines',
    }"
>
    <app-general-chat *ngIf="generalChatService.isChatOpen && !generalChatService.isChatClosed"></app-general-chat>
</section>
<section
    [hidden]="!this.generalChatService.isProfileOpen && !accountService.isInGame"
    class="chat-box"
    [@headerAnimation]="generalChatService.isProfileOpen ? 'open' : 'closed'"
    *ngIf="!accountService.isInGame"
    [ngClass]="{
        'light-mode': this.accountService.theme === 'light',
        'dark-mode': this.accountService.theme === 'dark',
        christmas: this.accountService.theme === 'christmas',
        valentines: this.accountService.theme === 'valentines',
    }"
>
    <app-profile></app-profile>
</section>
<section
    [ngClass]="{
        'light-mode': this.accountService.theme === 'light',
        'dark-mode': this.accountService.theme === 'dark',
        christmas: this.accountService.theme === 'christmas',
        valentines: this.accountService.theme === 'valentines',
    }"
    [hidden]="!this.generalChatService.isFriendsOpen && !accountService.isInGame"
    class="chat-box friends-box"
    [@headerAnimation]="generalChatService.isFriendsOpen ? 'open' : 'closed'"
    *ngIf="!accountService.isInGame"
>
    <app-friends></app-friends>
</section>

<section
    [hidden]="!this.generalChatService.isShopOpen && !accountService.isInGame"
    class="chat-box"
    [@headerAnimation]="generalChatService.isShopOpen ? 'open' : 'closed'"
    *ngIf="!accountService.isInGame"
    [ngClass]="{
        'light-mode': this.accountService.theme === 'light',
        'dark-mode': this.accountService.theme === 'dark',
        christmas: this.accountService.theme === 'christmas',
        valentines: this.accountService.theme === 'valentines',
    }"
>
    <app-shop></app-shop>
</section>

